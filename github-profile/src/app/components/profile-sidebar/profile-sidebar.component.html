<div class="sidebar" *ngIf="user">
  <!-- Avatar -->
  <div class="avatar-container">
    <img [src]="user.avatar_url" [alt]="user.name" class="avatar" />
    <div class="status-badge" title="Set status">
      <span class="status-emoji">ðŸŽ¯</span>
    </div>
  </div>

  <!-- Name & Username -->
  <div class="user-names">
    <h1 class="display-name">{{ user.name || user.login }}</h1>
    <span class="username">{{ user.login }}</span>
  </div>

  <!-- Bio from API (handles \r\n line breaks) -->
  <div class="bio" *ngIf="user.bio">
    @for (line of getBioLines(); track $index) {
      <p>{{ line }}</p>
    }
  </div>

  <!-- Edit profile button -->
  <button class="edit-profile-btn">Edit profile</button>

  <!-- Followers / Following (clickable to expand lists from API) -->
  <div class="followers-info">
    <a class="follower-link" (click)="toggleFollowers()">
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="M2 5.5a3.5 3.5 0 1 1 5.898 2.549 5.508 5.508 0 0 1 3.034 4.084.75.75 0 1 1-1.482.235 4.001 4.001 0 0 0-6.9 0 .75.75 0 0 1-1.482-.236A5.507 5.507 0 0 1 3.102 8.05 3.493 3.493 0 0 1 2 5.5ZM11 4a.75.75 0 1 0 0 1.5 1.5 1.5 0 0 1 .666 2.844.75.75 0 0 0-.416.672v.352a.75.75 0 0 0 .574.73c1.2.289 2.162 1.2 2.522 2.372a.75.75 0 1 0 1.434-.44 5.01 5.01 0 0 0-2.56-3.012A3 3 0 0 0 11 4Z"></path>
      </svg>
      <span><strong>{{ user.followers }}</strong> followers</span>
    </a>
    <span class="dot-sep">&middot;</span>
    <a class="follower-link" (click)="toggleFollowing()">
      <span><strong>{{ user.following }}</strong> following</span>
    </a>
  </div>

  <!-- Followers List (from GET /users/{username}/followers API) -->
  @if (showFollowersList && followers.length > 0) {
    <div class="people-list">
      <h3 class="people-list-title">Followers</h3>
      @for (follower of followers; track follower.id) {
        <a [href]="follower.html_url" target="_blank" class="people-item">
          <img [src]="follower.avatar_url" [alt]="follower.login" class="people-avatar" width="32" height="32" />
          <span class="people-login">{{ follower.login }}</span>
        </a>
      }
    </div>
  }

  <!-- Following List (from GET /users/{username}/following API) -->
  @if (showFollowingList && following.length > 0) {
    <div class="people-list">
      <h3 class="people-list-title">Following</h3>
      @for (person of following; track person.id) {
        <a [href]="person.html_url" target="_blank" class="people-item">
          <img [src]="person.avatar_url" [alt]="person.login" class="people-avatar" width="32" height="32" />
          <span class="people-login">{{ person.login }}</span>
        </a>
      }
    </div>
  }

  <!-- Details -->
  <ul class="user-details">
    <!-- Company from API -->
    <li>
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="M1.75 16A1.75 1.75 0 0 1 0 14.25V1.75C0 .784.784 0 1.75 0h8.5C11.216 0 12 .784 12 1.75v12.5c0 .085-.006.168-.018.25h2.268a.25.25 0 0 0 .25-.25V8.285a.25.25 0 0 0-.111-.208l-1.055-.703a.749.749 0 1 1 .832-1.248l1.055.703c.487.325.779.871.779 1.456v5.965A1.75 1.75 0 0 1 14.25 16h-3.5a.766.766 0 0 1-.197-.026c-.099.017-.2.026-.303.026h-3a.75.75 0 0 1-.75-.75V14h-1v1.25a.75.75 0 0 1-.75.75Zm-.25-1.75c0 .138.112.25.25.25H4v-1.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 .75.75v1.25h2.25a.25.25 0 0 0 .25-.25V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Z"></path>
      </svg>
      <span>{{ user.company || 'UptimeAI' }}</span>
    </li>

    <!-- Location from API -->
    <li>
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="m12.596 11.596-3.535 3.536a1.5 1.5 0 0 1-2.122 0l-3.535-3.536a6.5 6.5 0 1 1 9.192 0ZM8 11.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm0-1.5a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z"></path>
      </svg>
      <span>{{ user.location || 'Bangalore, India' }}</span>
    </li>

    <!-- Email - from API or fallback to screenshot value if email not exist then default value of email is used here provided in ss -->
    <li>
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="M1.75 2h12.5c.966 0 1.75.784 1.75 1.75v8.5A1.75 1.75 0 0 1 14.25 14H1.75A1.75 1.75 0 0 1 0 12.25v-8.5C0 2.784.784 2 1.75 2ZM1.5 12.251c0 .138.112.25.25.25h12.5a.25.25 0 0 0 .25-.25V5.809L8.38 9.397a.75.75 0 0 1-.76 0L1.5 5.809v6.442Zm13-8.181v-.32a.25.25 0 0 0-.25-.25H1.75a.25.25 0 0 0-.25.25v.32L8 7.88Z"></path>
      </svg>
      <a *ngIf="user.email" [href]="'mailto:' + user.email">{{ user.email }}</a>
      <a *ngIf="!user.email" href="mailto:kushwaha.shreeram@gmail.com">kushwaha.shreeram&#64;gmail.com</a>
    </li>

    <!-- Blog/website from API -->
    <li *ngIf="user.blog">
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="M7.775 3.275a.75.75 0 0 0 1.06 1.06l1.25-1.25a2 2 0 1 1 2.83 2.83l-2.5 2.5a2 2 0 0 1-2.83 0 .75.75 0 0 0-1.06 1.06 3.5 3.5 0 0 0 4.95 0l2.5-2.5a3.5 3.5 0 0 0-4.95-4.95l-1.25 1.25Zm-4.69 9.64a2 2 0 0 1 0-2.83l2.5-2.5a2 2 0 0 1 2.83 0 .75.75 0 0 0 1.06-1.06 3.5 3.5 0 0 0-4.95 0l-2.5 2.5a3.5 3.5 0 0 0 4.95 4.95l1.25-1.25a.75.75 0 0 0-1.06-1.06l-1.25 1.25a2 2 0 0 1-2.83 0Z"></path>
      </svg>
      <a [href]="user.blog" target="_blank">{{ user.blog }}</a>
    </li>

    <!-- LinkedIn from social accounts API or fallback -->
    <li>
      <svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 16 16" fill="#656d76">
        <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146Zm4.943 12.248V6.169H2.542v7.225h2.401Zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016Zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4Z"></path>
      </svg>
      @if (getSocialByProvider('linkedin')) {
        <a [href]="getSocialByProvider('linkedin').url" target="_blank">{{ getSocialByProvider('linkedin').url }}</a>
      } @else {
        <a href="#">in/shreeramkushwaha</a>
      }
    </li>

    <!-- Twitter/X from API twitter_username field -->
    <li>
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="M12.258 3h2.1L9.722 8.267l5.455 7.208h-4.291l-3.357-4.39L3.612 15.475H1.51l4.973-5.686L1.2 3h4.4l3.035 4.012L12.258 3Zm-.74 10.842h1.164L5.928 4.198H4.676l6.842 9.644Z"></path>
      </svg>
      <a [href]="'https://x.com/' + (user.twitter_username || 'pom_fret')" target="_blank">
        &#64;{{ user.twitter_username || 'pom_fret' }}
      </a>
    </li>
  </ul>

  <!-- Achievements -->
  <div class="achievements-section">
    <h2 class="section-title">Achievements</h2>
    <div class="achievements-list">
      @for (achievement of achievements; track achievement.name) {
        <div class="achievement-badge" [title]="achievement.name">
          <div class="achievement-icon" [style.background]="achievement.color + '22'" [style.border-color]="achievement.color">
            <svg height="28" viewBox="0 0 16 16" width="28" [attr.fill]="achievement.color">
              <path [attr.d]="achievement.icon"></path>
            </svg>
          </div>
          <span class="achievement-name">{{ achievement.name }}</span>
        </div>
      }
    </div>
  </div>

  <!-- Organizations -->
  <div class="organizations-section">
    <h2 class="section-title">Organizations</h2>
    <div class="org-list">
      @if (organizations.length > 0) {
        @for (org of organizations; track org.id) {
          <a [href]="'https://github.com/' + org.login" target="_blank" class="org-avatar" [title]="org.login">
            <img [src]="org.avatar_url" [alt]="org.login" width="35" height="35" />
          </a>
        }
      } @else {
        <a href="#" class="org-avatar" title="UptimeAI">
          <div class="org-placeholder">U</div>
        </a>
      }
    </div>
  </div>

  <!-- Security Keys (from GPG, SSH, SSH Signing Keys APIs) -->
  @if (gpgKeys.length > 0 || sshKeys.length > 0 || sshSigningKeys.length > 0) {
    <div class="keys-section">
      <h2 class="section-title">Security Keys</h2>
      <ul class="keys-list">
        @if (gpgKeys.length > 0) {
          <li class="key-item">
            <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
              <path d="M5.5 4.25a2.25 2.25 0 0 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM7.75.75a3.5 3.5 0 0 0-3.433 4.185l-4.19 4.19a.75.75 0 0 0-.22.53v2.6a.75.75 0 0 0 .75.75H3v-1.5h1.5V10H6v-1.5h1.19l.06-.06a3.5 3.5 0 0 0 .5.06 3.5 3.5 0 1 0 0-7Z"></path>
            </svg>
            <span>{{ gpgKeys.length }} GPG {{ gpgKeys.length === 1 ? 'key' : 'keys' }}</span>
          </li>
        }
        @if (sshKeys.length > 0) {
          <li class="key-item">
            <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
              <path d="M5.5 4.25a2.25 2.25 0 0 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM7.75.75a3.5 3.5 0 0 0-3.433 4.185l-4.19 4.19a.75.75 0 0 0-.22.53v2.6a.75.75 0 0 0 .75.75H3v-1.5h1.5V10H6v-1.5h1.19l.06-.06a3.5 3.5 0 0 0 .5.06 3.5 3.5 0 1 0 0-7Z"></path>
            </svg>
            <span>{{ sshKeys.length }} SSH {{ sshKeys.length === 1 ? 'key' : 'keys' }}</span>
          </li>
        }
        @if (sshSigningKeys.length > 0) {
          <li class="key-item">
            <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
              <path d="M9.585.52a2.678 2.678 0 0 0-3.17 0l-.928.68a1.178 1.178 0 0 1-.518.215L3.83 1.59a2.678 2.678 0 0 0-2.24 2.24l-.175 1.14a1.178 1.178 0 0 1-.215.518l-.68.928a2.678 2.678 0 0 0 0 3.17l.68.928c.113.153.186.33.215.518l.175 1.138a2.678 2.678 0 0 0 2.24 2.24l1.138.175c.187.029.365.102.518.215l.928.68a2.678 2.678 0 0 0 3.17 0l.928-.68a1.17 1.17 0 0 1 .518-.215l1.138-.175a2.678 2.678 0 0 0 2.241-2.24l.175-1.138c.029-.187.102-.365.215-.518l.68-.928a2.678 2.678 0 0 0 0-3.17l-.68-.928a1.179 1.179 0 0 1-.215-.518L14.41 3.83a2.678 2.678 0 0 0-2.24-2.24l-1.138-.175a1.179 1.179 0 0 1-.518-.215ZM7.303 1.728c.415-.305.979-.305 1.394 0l.928.68c.348.256.752.423 1.18.489l1.136.174c.51.078.909.478.987.987l.174 1.137c.066.427.233.831.489 1.18l.68.927c.305.415.305.979 0 1.394l-.68.928a2.678 2.678 0 0 0-.489 1.18l-.174 1.136a1.178 1.178 0 0 1-.987.987l-1.137.174a2.678 2.678 0 0 0-1.18.489l-.927.68c-.415.305-.979.305-1.394 0l-.928-.68a2.678 2.678 0 0 0-1.18-.489l-1.136-.174a1.178 1.178 0 0 1-.987-.987l-.174-1.137a2.678 2.678 0 0 0-.489-1.18l-.68-.927a1.178 1.178 0 0 1 0-1.394l.68-.928c.256-.348.423-.752.489-1.18l.174-1.136c.078-.51.478-.909.987-.987l1.137-.174a2.678 2.678 0 0 0 1.18-.489ZM11.28 6.78l-3.75 3.75a.75.75 0 0 1-1.06 0L4.72 8.78a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L7 8.94l3.22-3.22a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path>
            </svg>
            <span>{{ sshSigningKeys.length }} SSH signing {{ sshSigningKeys.length === 1 ? 'key' : 'keys' }}</span>
          </li>
        }
      </ul>
    </div>
  }

  <!-- Member Since (from user.created_at) -->
  @if (getMemberSince()) {
    <div class="member-since">
      <svg height="16" viewBox="0 0 16 16" width="16" fill="#656d76">
        <path d="M4.75 0a.75.75 0 0 1 .75.75V2h5V.75a.75.75 0 0 1 1.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 13.25 16H2.75A1.75 1.75 0 0 1 1 14.25V3.75C1 2.784 1.784 2 2.75 2H4V.75A.75.75 0 0 1 4.75 0ZM2.5 7.5v6.75c0 .138.112.25.25.25h10.5a.25.25 0 0 0 .25-.25V7.5Zm10.75-4H2.75a.25.25 0 0 0-.25.25V6h11V3.75a.25.25 0 0 0-.25-.25Z"></path>
      </svg>
      <span>Member since {{ getMemberSince() }}</span>
    </div>
  }
</div>
